private static void UpdateDbWithException(Exception ex)
{
    string connectionString = @"Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=TwentyOneGame;
                                Integrated Security=True;Connect Timeout=30;Encrypt=False;
                                TrustServerCertificate=False;ApplicationIntent=ReadWrite;
                                MultiSubnetFailover=False";

    string queryString = @"INSERT INTO Exceptions (ExceptionType, ExceptionMessage, TimeStamp)
                           VALUES (@ExceptionType, @ExceptionMessage, @TimeStamp)";

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand(queryString, connection);

        command.Parameters.Add("@ExceptionType", SqlDbType.VarChar);
        command.Parameters.Add("@ExceptionMessage", SqlDbType.VarChar);
        command.Parameters.Add("@TimeStamp", SqlDbType.DateTime);

        command.Parameters["@ExceptionType"].Value = ex.GetType().ToString();
        command.Parameters["@ExceptionMessage"].Value = ex.Message;
        command.Parameters["@TimeStamp"].Value = DateTime.Now;

        connection.Open();

        // Explicitly list the columns excluding the timestamp column
        command.CommandText = "INSERT INTO Exceptions (ExceptionType, ExceptionMessage, TimeStamp) VALUES (@ExceptionType, @ExceptionMessage, @TimeStamp)";

        command.ExecuteNonQuery();

        connection.Close();
    }
}

